{"file":"cp-stock-finder.js","mappings":";;;;AAAA,MAAM,cAAc,GAAG,o5BAAo5B;;MCS95B,WAAW;;;;;;yBAKuC,EAAE;mBAG5C,KAAK;;EAExB,YAAY,CAAC,KAAY;IACvB,KAAK,CAAC,cAAc,EAAE,CAAC;IACvB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACpB,MAAM,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;IAC5C,KAAK,CAAC,qEAAqE,SAAS,WAAW,UAAU,EAAE,CAAC;OACzG,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC;OACvB,IAAI,CAAC,SAAS;MACb,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,KAAK;QACrD,OAAO,EAAE,MAAM,EAAE,KAAK,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,EAAE,CAAC;OAC/D,CAAC,CAAC;MACH,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;KACtB,CAAC;OACD,KAAK,CAAC,GAAG;MACR,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACnB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;KACtB,CAAC,CAAC;GACN;EAED,cAAc,CAAC,MAAc;IAC3B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;GACjC;EAED,MAAM;IACJ,QACE,EAAC,IAAI,QACH,YAAM,KAAK,EAAC,gBAAgB,EAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IACjE,aAAO,EAAE,EAAC,cAAc,EAAC,GAAG,EAAE,EAAE,KAAK,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,GAAI,EAClE,cAAQ,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAC,eAAe,YAElC,CACJ,EACN,IAAI,CAAC,OAAO,IACX,qBAAyB,KAEzB,cACG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,KAC5B,UAAI,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,IACxD,kBAAS,MAAM,CAAC,MAAM,CAAU,SAAI,MAAM,CAAC,IAAI,CAC5C,CACN,CAAC,CACC,CACN,CACI,EACP;GACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["./src/components/stock-finder/stock-finder.css?tag=cp-stock-finder&encapsulation=shadow","./src/components/stock-finder/stock-finder.tsx"],"sourcesContent":[":host {\n  display: block;\n  font-family: sans-serif;\n  margin: 2rem;\n  border: 2px solid var(--color-primary, black);\n  padding: 1rem;\n  width: max-content;\n}\n.form-container {\n  display: flex;\n}\n.form-container #stock-symbol:focus,\n.form-container .search-button:focus {\n  outline: none;\n}\n.form-container #stock-symbol{\n  font: inherit;\n  color: var(--color-primary, black);\n  margin-right: 1rem;\n  padding: 0.1rem 0.25rem;\n}\n.form-container .search-button {\n  font: inherit;\n  padding: 0.25rem 0.5rem;\n  border: 1px solid var(--color-primary, black);\n  background: var(--color-primary, black);\n  color: white;\n  cursor: pointer;\n}\n.form-container .search-button:hover,\n.form-container .search-button:active {\n  background: #750175;\n}\n.form-container .search-button:disabled{\n  background: #ccc;\n  border: #ccc;\n  color: grey;\n  cursor: not-allowed;\n}\n\nul {\n  margin: 15px 0 0 0;\n  padding: 0;\n  list-style: none;\n}\nli {\n  margin: 0.25rem 0;\n  padding: 0.25rem;\n  border: 1px solid #ccc;\n  cursor: pointer;\n}\n\nli:hover {\n  background: var(--color-primary, black);\n  color: white;\n}","import { Component, Host, h, State, Event, EventEmitter } from '@stencil/core';\n\nimport { AV_API_KEY } from '../../global/global';\n\n@Component({\n  tag: 'cp-stock-finder',\n  styleUrl: 'stock-finder.css',\n  shadow: true,\n})\nexport class StockFinder {\n  stockNameInput: HTMLInputElement;\n\n  @Event({ bubbles: true, composed: true }) symbolEmitter: EventEmitter<string>;\n\n  @State() searchResults: { symbol: string; name: string }[] = [];\n  // @State() searchResults = [{name:'Puru', symbol: 'PS'}, {name:'Shweta', symbol: 'PS'}];\n\n  @State() loading = false;\n\n  onFindStocks(event: Event) {\n    event.preventDefault();\n    this.loading = true;\n    const stockName = this.stockNameInput.value;\n    fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${stockName}&apikey=${AV_API_KEY}`)\n      .then(res => res.json())\n      .then(parsedRes => {\n        this.searchResults = parsedRes['bestMatches'].map(match => {\n          return { symbol: match['1. symbol'], name: match['2. name'] };\n        });\n        this.loading = false;\n      })\n      .catch(err => {\n        console.error(err);\n        this.loading = false;\n      });\n  }\n\n  onSelectSymbol(symbol: string) {\n    this.symbolEmitter.emit(symbol);\n  }\n\n  render() {\n    return (\n      <Host>\n        <form class=\"form-container\" onSubmit={this.onFindStocks.bind(this)}>\n          <input id=\"stock-symbol\" ref={el => (this.stockNameInput = el)} />\n          <button type=\"submit\" class=\"search-button\">\n            Find!\n          </button>\n        </form>\n        {this.loading ? (\n          <cp-spinner></cp-spinner>\n        ) : (\n          <ul>\n            {this.searchResults.map(result => (\n              <li onClick={this.onSelectSymbol.bind(this, result.symbol)}>\n                <strong>{result.symbol}</strong> - {result.name}\n              </li>\n            ))}\n          </ul>\n        )}\n      </Host>\n    );\n  }\n}\n"],"version":3}