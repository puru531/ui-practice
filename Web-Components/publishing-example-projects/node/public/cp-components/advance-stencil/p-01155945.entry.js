import{r as i,h as t,H as o,c as s}from"./p-5745020b.js";const r=":host{display:block}.lds-ellipsis{display:inline-block;position:relative;width:80px;height:40px}.lds-ellipsis div{position:absolute;top:20px;width:13px;height:13px;border-radius:50%;background:#3b013b;animation-timing-function:cubic-bezier(0, 1, 1, 0)}.lds-ellipsis div:nth-child(1){left:8px;animation:lds-ellipsis1 0.6s infinite}.lds-ellipsis div:nth-child(2){left:8px;animation:lds-ellipsis2 0.6s infinite}.lds-ellipsis div:nth-child(3){left:32px;animation:lds-ellipsis2 0.6s infinite}.lds-ellipsis div:nth-child(4){left:56px;animation:lds-ellipsis3 0.6s infinite}@keyframes lds-ellipsis1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes lds-ellipsis2{0%{transform:translate(0, 0)}100%{transform:translate(24px, 0)}}";const n=class{constructor(t){i(this,t)}render(){return t(o,null,t("div",{class:"lds-ellipsis"},t("div",null),t("div",null),t("div",null),t("div",null)))}};n.style=r;const e="FMKPL2P1JCFI986S";const l=":host{display:block;font-family:sans-serif;margin:2rem;border:2px solid var(--color-primary, black);padding:1rem;width:max-content}.form-container{display:flex}.form-container #stock-symbol:focus,.form-container .search-button:focus{outline:none}.form-container #stock-symbol{font:inherit;color:var(--color-primary, black);margin-right:1rem;padding:0.1rem 0.25rem}.form-container .search-button{font:inherit;padding:0.25rem 0.5rem;border:1px solid var(--color-primary, black);background:var(--color-primary, black);color:white;cursor:pointer}.form-container .search-button:hover,.form-container .search-button:active{background:#750175}.form-container .search-button:disabled{background:#ccc;border:#ccc;color:grey;cursor:not-allowed}ul{margin:15px 0 0 0;padding:0;list-style:none}li{margin:0.25rem 0;padding:0.25rem;border:1px solid #ccc;cursor:pointer}li:hover{background:var(--color-primary, black);color:white}";const c=class{constructor(t){i(this,t);this.symbolEmitter=s(this,"symbolEmitter",7);this.searchResults=[];this.loading=false}onFindStocks(i){i.preventDefault();this.loading=true;const t=this.stockNameInput.value;fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${t}&apikey=${e}`).then((i=>i.json())).then((i=>{this.searchResults=i["bestMatches"].map((i=>({symbol:i["1. symbol"],name:i["2. name"]})));this.loading=false})).catch((i=>{console.error(i);this.loading=false}))}onSelectSymbol(i){this.symbolEmitter.emit(i)}render(){return t(o,null,t("form",{class:"form-container",onSubmit:this.onFindStocks.bind(this)},t("input",{id:"stock-symbol",ref:i=>this.stockNameInput=i}),t("button",{type:"submit",class:"search-button"},"Find!")),this.loading?t("cp-spinner",null):t("ul",null,this.searchResults.map((i=>t("li",{onClick:this.onSelectSymbol.bind(this,i.symbol)},t("strong",null,i.symbol)," - ",i.name)))))}};c.style=l;const a=":host{display:block;font-family:sans-serif;margin:2rem;border:2px solid var(--color-primary, black);padding:1rem;width:max-content}:host(.error){border-color:rgb(249, 86, 4)}.form-container{display:flex}.form-container #stock-symbol:focus,.form-container .search-button:focus{outline:none}.form-container #stock-symbol{font:inherit;color:var(--color-primary, black);margin-right:1rem;padding:0.1rem 0.25rem}.form-container .search-button{font:inherit;padding:0.25rem 0.5rem;border:1px solid var(--color-primary, black);background:var(--color-primary, black);color:white;cursor:pointer}.form-container .search-button:hover,.form-container .search-button:active{background:var(--color-primary, black)}.form-container .search-button:disabled{background:#ccc;border:#ccc;color:grey;cursor:not-allowed}";const d=class{constructor(t){i(this,t);this.validStockInput=false;this.fetchedPrice=undefined;this.error=undefined;this.loading=false;this.stockUserInput=undefined}componentWillLoad(){console.log("componentWillLoad")}componentDidLoad(){console.log("componentDidLoad");if(this.stockUserInput){this.validStockInput=true;this.fetchStockPrice(this.stockUserInput)}}componentWillUpdate(){console.log("componentWillUpdate")}componentDidUpdate(){console.log("componentDidUpdate")}onStockSymbolSelected(i){if(i.detail&&i.detail!==this.stockUserInput){this.stockUserInput=i.detail}}stockSymbolChanged(i,t){if(i!==t){this.stockUserInput=i;this.validStockInput=true;this.fetchStockPrice(i)}}disconnectedCallback(){console.log("disconnectedCallback")}onUserInput(i){this.stockUserInput=i.target.value;this.validStockInput=this.stockUserInput.trim()!==""?true:false}onFetchStockPrice(i){i.preventDefault();this.fetchStockPrice(this.stockUserInput)}fetchStockPrice(i){this.loading=true;this.error=null;this.fetchedPrice=undefined;fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${i}&apikey=${e}`).then((i=>{if(i.status!==200){throw new Error("Invalid")}return i.json()})).then((i=>{if(!i["Global Quote"]||!i["Global Quote"]["05. price"]){throw new Error("Invalid symbol!")}this.error=null;this.fetchedPrice=+i["Global Quote"]["05. price"];this.loading=false})).catch((i=>{this.error=i.message;this.fetchedPrice=null;this.loading=false}))}render(){return t(o,{class:this.error?"error":""},t("form",{class:"form-container",onSubmit:this.onFetchStockPrice.bind(this)},t("input",{id:"stock-symbol",ref:i=>this.stockInput=i,value:this.stockUserInput,onInput:this.onUserInput.bind(this)})," ",t("button",{type:"submit",class:"search-button",disabled:!this.validStockInput||this.loading},"Fetch")),t("div",null,this.loading?t("cp-spinner",null):t("span",null,this.error?t("p",null,this.error):t("p",null,"Price: ",this.fetchedPrice&&"$"+this.fetchedPrice))))}static get watchers(){return{stockUserInput:["stockSymbolChanged"]}}};d.style=a;export{n as cp_spinner,c as cp_stock_finder,d as cp_stock_price};
//# sourceMappingURL=p-01155945.entry.js.map