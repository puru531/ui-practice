{"version":3,"names":["cpSpinnerCss","CpSpinner","render","h","Host","class","AV_API_KEY","stockFinderCss","StockFinder","onFindStocks","event","preventDefault","this","loading","stockName","stockNameInput","value","fetch","then","res","json","parsedRes","searchResults","map","match","symbol","name","catch","err","console","error","onSelectSymbol","symbolEmitter","emit","onSubmit","bind","id","ref","el","type","result","onClick","stockPriceCss","StockPrice","componentWillLoad","log","componentDidLoad","stockUserInput","validStockInput","fetchStockPrice","componentWillUpdate","componentDidUpdate","onStockSymbolSelected","detail","stockSymbolChanged","newValue","oldValue","disconnectedCallback","onUserInput","target","trim","onFetchStockPrice","fetchedPrice","undefined","status","Error","message","stockInput","onInput","disabled"],"sources":["./src/components/cp-spinner/cp-spinner.css?tag=cp-spinner&encapsulation=shadow","./src/components/cp-spinner/cp-spinner.tsx","./src/global/global.ts","./src/components/stock-finder/stock-finder.css?tag=cp-stock-finder&encapsulation=shadow","./src/components/stock-finder/stock-finder.tsx","./src/components/stock-price/stock-price.css?tag=cp-stock-price&encapsulation=shadow","./src/components/stock-price/stock-price.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n\n\n/* ============================ spinner =========================== */\n.lds-ellipsis {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 40px;\n}\n.lds-ellipsis div {\n  position: absolute;\n  top: 20px;\n  width: 13px;\n  height: 13px;\n  border-radius: 50%;\n  background: #3b013b;\n  animation-timing-function: cubic-bezier(0, 1, 1, 0);\n}\n.lds-ellipsis div:nth-child(1) {\n  left: 8px;\n  animation: lds-ellipsis1 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(2) {\n  left: 8px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(3) {\n  left: 32px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(4) {\n  left: 56px;\n  animation: lds-ellipsis3 0.6s infinite;\n}\n@keyframes lds-ellipsis1 {\n  0% {\n    transform: scale(0);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes lds-ellipsis3 {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n@keyframes lds-ellipsis2 {\n  0% {\n    transform: translate(0, 0);\n  }\n  100% {\n    transform: translate(24px, 0);\n  }\n}\n","import { Component, Host, h } from '@stencil/core';\n\n@Component({\n  tag: 'cp-spinner',\n  styleUrl: 'cp-spinner.css',\n  shadow: true,\n})\nexport class CpSpinner {\n  render() {\n    return (\n      <Host>\n        <div class=\"lds-ellipsis\">\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </Host>\n    );\n  }\n}\n","export const AV_API_KEY = 'FMKPL2P1JCFI986S';",":host {\n  display: block;\n  font-family: sans-serif;\n  margin: 2rem;\n  border: 2px solid var(--color-primary, black);\n  padding: 1rem;\n  width: max-content;\n}\n.form-container {\n  display: flex;\n}\n.form-container #stock-symbol:focus,\n.form-container .search-button:focus {\n  outline: none;\n}\n.form-container #stock-symbol{\n  font: inherit;\n  color: var(--color-primary, black);\n  margin-right: 1rem;\n  padding: 0.1rem 0.25rem;\n}\n.form-container .search-button {\n  font: inherit;\n  padding: 0.25rem 0.5rem;\n  border: 1px solid var(--color-primary, black);\n  background: var(--color-primary, black);\n  color: white;\n  cursor: pointer;\n}\n.form-container .search-button:hover,\n.form-container .search-button:active {\n  background: #750175;\n}\n.form-container .search-button:disabled{\n  background: #ccc;\n  border: #ccc;\n  color: grey;\n  cursor: not-allowed;\n}\n\nul {\n  margin: 15px 0 0 0;\n  padding: 0;\n  list-style: none;\n}\nli {\n  margin: 0.25rem 0;\n  padding: 0.25rem;\n  border: 1px solid #ccc;\n  cursor: pointer;\n}\n\nli:hover {\n  background: var(--color-primary, black);\n  color: white;\n}","import { Component, Host, h, State, Event, EventEmitter } from '@stencil/core';\n\nimport { AV_API_KEY } from '../../global/global';\n\n@Component({\n  tag: 'cp-stock-finder',\n  styleUrl: 'stock-finder.css',\n  shadow: true,\n})\nexport class StockFinder {\n  stockNameInput: HTMLInputElement;\n\n  @Event({ bubbles: true, composed: true }) symbolEmitter: EventEmitter<string>;\n\n  @State() searchResults: { symbol: string; name: string }[] = [];\n  // @State() searchResults = [{name:'Puru', symbol: 'PS'}, {name:'Shweta', symbol: 'PS'}];\n\n  @State() loading = false;\n\n  onFindStocks(event: Event) {\n    event.preventDefault();\n    this.loading = true;\n    const stockName = this.stockNameInput.value;\n    fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${stockName}&apikey=${AV_API_KEY}`)\n      .then(res => res.json())\n      .then(parsedRes => {\n        this.searchResults = parsedRes['bestMatches'].map(match => {\n          return { symbol: match['1. symbol'], name: match['2. name'] };\n        });\n        this.loading = false;\n      })\n      .catch(err => {\n        console.error(err);\n        this.loading = false;\n      });\n  }\n\n  onSelectSymbol(symbol: string) {\n    this.symbolEmitter.emit(symbol);\n  }\n\n  render() {\n    return (\n      <Host>\n        <form class=\"form-container\" onSubmit={this.onFindStocks.bind(this)}>\n          <input id=\"stock-symbol\" ref={el => (this.stockNameInput = el)} />\n          <button type=\"submit\" class=\"search-button\">\n            Find!\n          </button>\n        </form>\n        {this.loading ? (\n          <cp-spinner></cp-spinner>\n        ) : (\n          <ul>\n            {this.searchResults.map(result => (\n              <li onClick={this.onSelectSymbol.bind(this, result.symbol)}>\n                <strong>{result.symbol}</strong> - {result.name}\n              </li>\n            ))}\n          </ul>\n        )}\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  font-family: sans-serif;\n  margin: 2rem;\n  border: 2px solid var(--color-primary, black);\n  padding: 1rem;\n  width: max-content;\n}\n:host(.error) {\n  border-color: rgb(249, 86, 4);\n}\n.form-container {\n  display: flex;\n}\n.form-container #stock-symbol:focus,\n.form-container .search-button:focus {\n  outline: none;\n}\n.form-container #stock-symbol{\n  font: inherit;\n  color: var(--color-primary, black);\n  margin-right: 1rem;\n  padding: 0.1rem 0.25rem;\n}\n.form-container .search-button {\n  font: inherit;\n  padding: 0.25rem 0.5rem;\n  border: 1px solid var(--color-primary, black);\n  background: var(--color-primary, black);\n  color: white;\n  cursor: pointer;\n}\n.form-container .search-button:hover,\n.form-container .search-button:active {\n  background: var(--color-primary, black);\n}\n.form-container .search-button:disabled{\n  background: #ccc;\n  border: #ccc;\n  color: grey;\n  cursor: not-allowed;\n}","import { Component, Host, h, State, Prop, Watch, Listen } from '@stencil/core';\n\nimport { AV_API_KEY } from '../../global/global';\n\n@Component({\n  tag: 'cp-stock-price',\n  styleUrl: 'stock-price.css',\n  shadow: true,\n})\nexport class StockPrice {\n  //Referencing an element\n  stockInput: HTMLInputElement;\n\n  // @Element() el: HTMLElement; //To access host element\n\n  @State() validStockInput = false;\n  @State() fetchedPrice: number;\n  @State() error: string;\n  @State() loading = false;\n\n  @Prop({ mutable: true, reflect: true }) stockUserInput: string;\n\n  //All lifecycles\n  componentWillLoad() {\n    //will run right before component is about to load.\n    console.log('componentWillLoad');\n  }\n\n  componentDidLoad() {\n    console.log('componentDidLoad');\n    if (this.stockUserInput) {\n      this.validStockInput = true;\n      this.fetchStockPrice(this.stockUserInput);\n    }\n  }\n\n  componentWillUpdate() {\n    //runs right before rerendering the component after any property change\n    console.log('componentWillUpdate');\n  }\n  componentDidUpdate() {\n    //runs after component rerendered\n    console.log('componentDidUpdate');\n    //handled by watchToChanges\n    // if(this.stockSymbol !== this.stockUserInput) {  //used to run when prop is updated from outside\n    //   this.stockUserInput = this.stockSymbol;\n    //   this.fetchStockPrice(this.stockSymbol);\n    // }\n  }\n\n  //listening to event emitted by other components\n  @Listen('symbolEmitter', { target: 'body' })\n  onStockSymbolSelected(event: CustomEvent) {\n    if (event.detail && event.detail !== this.stockUserInput) {\n      this.stockUserInput = event.detail;\n      // this.fetchStockPrice(event.detail);\n    }\n  }\n\n  //keep watching on this attribute\n  @Watch('stockUserInput')\n  stockSymbolChanged(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.stockUserInput = newValue;\n      this.validStockInput = true;\n      this.fetchStockPrice(newValue);\n    }\n  }\n\n  disconnectedCallback() {\n    // after component is unloaded from the DOM\n    console.log('disconnectedCallback');\n  }\n\n  // //hostData returns some metaData about the component.\n  // hostData() {\n  //   return {class: this.error ? 'error' : ''}; //this will add error class in tag of the component\n  // } // <Host> should not be used for this\n\n  private onUserInput(event: Event) {\n    this.stockUserInput = (event.target as HTMLInputElement).value;\n    this.validStockInput = this.stockUserInput.trim() !== '' ? true : false; //can be used for check brfore fetching from API\n  }\n\n  private onFetchStockPrice(event: Event) {\n    event.preventDefault();\n    //accessing value of input\n    // console.log(this.el.shadowRoot.querySelector('#stock-symbol'));\n    // const stockSymbol = (this.el.shadowRoot.querySelector('#stock-symbol') as HTMLInputElement).value;\n\n    //refrenced element\n    // console.log(this.stockInput);\n    // const stockSymbol = this.stockInput.value;\n    // fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${stockSymbol}&apikey=${AV_API_KEY}`)\n    this.fetchStockPrice(this.stockUserInput);\n  }\n\n  private fetchStockPrice(stockUserInput: string) {\n    this.loading = true;\n    this.error = null;\n    this.fetchedPrice = undefined;\n    fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${stockUserInput}&apikey=${AV_API_KEY}`)\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Invalid');\n        }\n        return res.json();\n      })\n      .then(parsedRes => {\n        if (!parsedRes['Global Quote'] || !parsedRes['Global Quote']['05. price']) {\n          throw new Error('Invalid symbol!');\n        }\n        this.error = null;\n        this.fetchedPrice = +parsedRes['Global Quote']['05. price'];\n        this.loading = false;\n      })\n      .catch(err => {\n        this.error = err.message;\n        this.fetchedPrice = null;\n        this.loading = false;\n      });\n  }\n  render() {\n    return (\n      <Host class={this.error ? 'error' : ''}>\n        <form class=\"form-container\" onSubmit={this.onFetchStockPrice.bind(this)}>\n          <input id=\"stock-symbol\" ref={el => (this.stockInput = el)} value={this.stockUserInput} onInput={this.onUserInput.bind(this)} /> {/* Referencing the element */}\n          {/* Setting up two way binding for stockUserInput variable */}\n          {/* updating stockUserInput variable on every key stroke */}\n          <button type=\"submit\" class=\"search-button\" disabled={!this.validStockInput || this.loading}>\n            Fetch\n          </button>\n        </form>\n        <div>\n          {this.loading ? (\n            <cp-spinner></cp-spinner>\n          ) : (\n            <span>{this.error ? <p>{this.error}</p> : <p>Price: {this.fetchedPrice && '$' + this.fetchedPrice}</p>}</span>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}